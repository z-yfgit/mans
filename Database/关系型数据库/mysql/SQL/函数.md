## 函数


### TO_DAYS(date)
公元0年到指定日期的天数

```sql
-- 返回公元0年到现在的天数
show to_days(now());


-- 查询当天的数据
select * from 表名 where TO_DAYS(时间字段)=TO_DAYS(NOW());

-- 查询当周的数据
select * from 表名 where YEARWEEK(DATE_FORMAT(时间字段,'%Y-%m-%d'))=YEARWEEK(NOW());

-- 查询当月的数据
select * from 表名 where DATE_FORMAT(时间字段,'%Y%m')=DATE_FORMAT(CURDATE(),'%Y%m');

-- 查询昨天的数据
select * from 表名 where TO_DAYS(NOW())-TO_DAYS(时间字段)=1;

-- 查询最近7天的数据
select * from 表名 where DATE_SUB(CURDATE(),INTERVAL 7 DAY)<=DATE(时间字段);

-- 查询当年的数据

select * from 表名 where YEAR(时间字段) =YEAR(NOW());

-- 查询上周的数据
select * from 表名 where YEARWEEK(DATE_FORMAT(时间字段,'%Y-%m-%d'))=YEARWEEK(NOW())-1;

-- 查询上月的数据
select * from 表名

where PERIOD_DIFF(DATE_FORMAT(NOW(),‘%Y%m’),DATE_FORMAT(时间字段,‘%Y%m’)

SELECT a.*, b.* FROM table_a a JOIN table_b b ON a.id = b.id;

select a.host,b.asset_name,c.name,a.create_time from siem_asset_addr_info a join siem_asset_info b join siem_asset_system_type_info c  where a.id=b.id AND b.system_type = c.id AND DATE_SUB(CURDATE(),INTERVAL 30 DAY)<= DATE(a.create_time);
```

### NOW()
当前日期和时间

### COUNT()
```sql
-- count(1)
-- count(*)
-- count(col_name)

select count(*) from table_name;

select count(1) from table_name;
```
